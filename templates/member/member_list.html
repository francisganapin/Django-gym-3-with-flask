{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block content %}


<style>

#table-wrapper {
  position:relative;
}
#table-scroll {
  height:600px;
  overflow:auto;  
  margin-top:20px;
}
#table-wrapper table {
  width:100%;

}
#table-wrapper table * {
  background:white;
  color:black;
}
#table-wrapper table thead th .text {
  position:absolute;   
  top:-20px;
  z-index:2;
  height:200px;
  width:35%;
  border:1px solid red;
}



</style>



        <!-- Main Content -->
        <div class="content">
            <div class="header">
                <h1>Orders</h1>
                <button style="background: #2563eb; color: white; padding: 10px; border: none; border-radius: 5px; cursor: pointer;">Create New</button>
            </div>

            <!-- Filters -->
            <div class="filters">
                <input type="text" id="myInput" placeholder="Search Card" onkeyup="myFunction()">
                <select id="genderFilter">
                    <option>All</option>
                    <option>Female</option>
                    <option>Male</option>
                </select>
                <select id="renewedFilter">
                    <option>All</option>
                    <option>True</option>
                    <option>False</option>
                </select>
                <button onclick="filterResults()">Search</button>
            </div>

           <!-- Table -->
<div id="table-wrapper">
<div id="table-scroll">
<div class="table-container">
    <table id="memberTable">
        <thead>
            <tr>
            
                <th>ID</th>
                <th>Card</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Address</th>
                <th>Expiry</th>
                <th>Gender</th>
                <th>Join Date</th>
                <th>Phone Number</th>
                <th>Profile</th>
                <th>Renewed</th>
            </tr>
        </thead>
        <tbody id = 'tableBody'>
            {% for item in member_list %}
            <tr data-gender="{{ item.gender }}" 
    data-renewed="{{ item.renewed }}">

                <td>{{ forloop.counter }}</td>
                <td>{{ item.id_card }}</td>
                <td>{{ item.first_name }}</td>
                <td>{{ item.last_name }}</td>
                <td>{{ item.address }}</td>
                <td>{{ item.expiry }}</td>
                <td>{{ item.gender }}</td>
                <td>{{ item.join_date }}</td>
                <td>{{ item.phone_number }}</td>
                <td><img src="{{ item.profile_image }}" alt="Profile Image" width="50" height="50"></td>
                <td>{{ item.renewed }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    </div>
    </div>
    </div>



<!--- filter renewed and gender in current  page-->
<script>
    function filterResults(){
        let genderFilter = document.getElementById('genderFilter').value;
        let renewedFilter = document.getElementById('renewedFilter').value;



        let rows = document.querySelectorAll('#tableBody tr');

        rows.forEach(row =>{
            let gender = row.getAttribute('data-gender');
            let renewed = row.getAttribute('data-renewed');

        let genderMatch = (genderFilter === "All" || genderFilter === '' || gender === genderFilter);
        let renewedMatch = (renewedFilter === "All" || renewedFilter === '' || renewed === renewedFilter);

        if (genderMatch && renewedMatch){
            row.style.display = "";
        }else{
            row.style.display = 'None';
        }


        })
    }
</script>


<script>
    function myFunction() {
      var input, filter, table, tr, td, i, txtValue;
      input = document.getElementById("myInput");
      filter = input.value.toUpperCase();
      table = document.getElementById("memberTable");
      tr = table.getElementsByTagName("tr");
      for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[1];
        if (td) {
          txtValue = td.textContent || td.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }       
      }
    }
</script>


    

    {% endblock %}